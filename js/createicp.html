<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICP Form Builder</title>
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
    <style>
        .chip {
            display: inline-block;
            padding: 5px 10px;
            margin: 5px;
            background-color: #e0e0e0;
            border-radius: 16px;
        }
        .chip .close {
            margin-left: 8px;
            cursor: pointer;
        }
        .live-preview {
            position: fixed;
            top: 0;
            right: 0;
            width: 300px;
            height: 100%;
            background: #f9f9f9;
            border-left: 1px solid #ddd;
            overflow-y: auto;
            padding: 10px;
            display: none;
        }
        .live-preview.open {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container py-4">
        <h1 class="mb-4">ICP Form Builder</h1>

    <!-- Toggle Live Preview -->
    <button id="togglePreview" class="btn btn-primary mb-3">Toggle Live Preview</button>

    <!-- Form -->
    <form id="icpForm">
        <div class="mb-3">
            <label for="driveName" class="form-label">ICP Drive Name</label>
            <input type="text" class="form-control" id="driveName" placeholder="Enter Drive Name">
        </div>

        <!-- Lead Characteristics -->
        <h3>Lead Characteristics</h3>

        <div class="mb-3">
            <label for="industry" class="form-label">Industry</label>
            <select id="industry" class="form-select" multiple>
                <option>Technology</option>
                <option>Healthcare</option>
                <option>Biotechnology</option>
                <option>Pharmaceuticals</option>
                <option>Financial Services</option>
                <option>E-commerce</option>
                <option>Manufacturing</option>
                <option>Retail</option>
                <option>Education</option>
                <option>Government</option>
                <option>Non-profit</option>
                <option>Telecommunications</option>
                <option>Energy</option>
                <option>Transportation and Logistics</option>
                <option>Media and Entertainment</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="department" class="form-label">Department</label>
            <select id="department" class="form-select" multiple>
                <option>Executive Management</option>
                <option>Operations</option>
                <option>Sales</option>
                <option>Marketing</option>
                <option>Customer Service</option>
                <option>Product Development</option>
                <option>Human Resources (HR)</option>
                <option>Finance & Accounting</option>
                <option>Legal</option>
                <option>Information Technology (IT)</option>
                <option>Risk Management</option>
                <option>Quality Assurance (QA)</option>
                <option>Corporate Strategy</option>
                <option>Engineering</option>
                <option>Design</option>
                <option>Procurement/Purchasing</option>
                <option>Health, Safety & Environment (HSE)</option>
                <option>Facility Management</option>
                <option>Healthcare</option>
                <option>Retail</option>
                <option>Hospitality</option>
                <option>Education</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="headCount" class="form-label">Head Count</label>
            <select id="headCount" class="form-select" multiple>
                <option>Small (1-50 employees)</option>
                <option>Medium (51-200 employees)</option>
                <option>Large (201-500 employees)</option>
                <option>Enterprise (501-1,000 employees)</option>
                <option>Large Enterprise (1,001+ employees)</option>
            </select>
        </div>

        <!-- Key Decision Makers -->
        <h3>Key Decision Makers</h3>

        <div class="mb-3">
            <label for="titles" class="form-label">Titles</label>
            <select id="titles" class="form-select" multiple>
                <option>Chief Executive Officer (CEO)</option>
                <option>Chief Financial Officer (CFO)</option>
                <option>Chief Operating Officer (COO)</option>
                <option>Chief Technology Officer (CTO)</option>
                <option>Chief Information Officer (CIO)</option>
                <option>Chief Marketing Officer (CMO)</option>
                <option>Chief Revenue Officer (CRO)</option>
                <option>Chief Product Officer (CPO)</option>
                <option>Chief Medical Officer (CMO)</option>
                <option>Chief Scientific Officer (CSO)</option>
                <option>Vice President (VP) of Sales</option>
                <option>VP of Marketing</option>
                <option>VP of Engineering</option>
                <option>VP of Product</option>
                <option>VP of Operations</option>
                <option>VP of Human Resources</option>
                <option>VP of Research and Development</option>
                <option>Director of Sales</option>
                <option>Director of Marketing</option>
                <option>Director of Engineering</option>
                <option>Director of Product Management</option>
                <option>Director of IT</option>
                <option>Director of Operations</option>
                <option>Director of Human Resources</option>
                <option>Director of Clinical Research</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Responsibilities</label>
            <div id="responsibilitiesContainer">
                <input type="text" class="form-control mb-2" placeholder="Enter a responsibility">
            </div>
            <button type="button" id="addResponsibility" class="btn btn-secondary">Add Responsibility</button>
        </div>

        <!-- Revenue -->
        <div class="mb-3">
            <label for="revenue" class="form-label">Revenue</label>
            <select id="revenue" class="form-select" multiple>
                <option>&lt;$1M annually</option>
                <option>$1M - $10M annually</option>
                <option>$10M - $50M annually</option>
                <option>$50M - $100M annually</option>
                <option>$100M - $500M annually</option>
                <option>$500M - $1B annually</option>
                <option>$1B annually</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="location" class="form-label">Location</label>
            <select id="location" class="form-select" multiple>
                <option>North America</option>
                <option>Europe</option>
                <option>Asia</option>
                <option>South America</option>
                <option>Africa</option>
                <option>Australia</option>
                <option>Global</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="whyLocation" class="form-label">Why this location?</label>
            <textarea class="form-control" id="whyLocation" rows="3" placeholder="Explain why this location is important"></textarea>
        </div>

        <div class="mb-3">
            <label for="stages" class="form-label">Company Stages</label>
            <select id="stages" class="form-select" multiple>
                <option value="startup">Startup stage</option>
                <option value="seed">Seed stage</option>
                <option value="growth">Growth stage</option>
                <option value="expansion">Expansion stage</option>
                <option value="maturity">Maturity stage</option>
                <option value="decline">Decline or Renewal stage</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="subStages" class="form-label">Substages</label>
            <select id="subStages" class="form-select" multiple disabled>
            </select>
        </div>

        <button type="button" class="btn btn-success" id="saveForm">Save Form</button>
    </form>
</div>

<!-- Live Preview -->
<div id="livePreview" class="live-preview">
    <h3>Live Preview</h3>
    <pre id="previewContent">{}</pre>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
    $(document).ready(function() {
        $('#industry').select2({ placeholder: 'Select industries' });
        $('#department').select2({ placeholder: 'Select departments' });
        $('#headCount').select2({ placeholder: 'Select head counts' });
        $('#titles').select2({ placeholder: 'Select titles' });
        $('#revenue').select2({ placeholder: 'Select revenue ranges' });
        $('#location').select2({ placeholder: 'Select locations' });
        $('#stages').select2({ placeholder: 'Select company stages' });
        $('#subStages').select2({ placeholder: 'Select substages' });
    });

    const stagesToSubstages = {
        startup: ['Idea stage', 'Development stage', 'Launch stage'],
        seed: ['Validation stage', 'Early traction stage'],
        growth: ['Scaling stage', 'Market penetration stage', 'Series B to Series D funding'],
        expansion: ['Diversification stage', 'Global expansion stage', 'Acquisition stage'],
        maturity: ['Optimization stage', 'Innovation stage', 'Market leadership stage'],
        decline: ['Renewal stage', 'Manage decline stage']
    };

    $('#stages').on('change', function() {
        const selectedStages = $(this).val();
        const substages = selectedStages.flatMap(stage => stagesToSubstages[stage] || []);

        const subStagesSelect = $('#subStages');
        subStagesSelect.empty().prop('disabled', substages.length === 0);

        substages.forEach(substage => {
            subStagesSelect.append(new Option(substage, substage));
        });
    });

    document.getElementById('addResponsibility').addEventListener('click', () => {
        const container = document.getElementById('responsibilitiesContainer');
        const input = document.createElement('input');
        input.type = 'text';
        input.className = 'form-control mb-2';
        input.placeholder = 'Enter a responsibility';
        container.appendChild(input);
    });

    const togglePreviewButton = document.getElementById('togglePreview');
    const livePreview = document.getElementById('livePreview');
    const previewContent = document.getElementById('previewContent');

    togglePreviewButton.addEventListener('click', () => {
        livePreview.classList.toggle('open');
    });

    function downloadJSON(data, filename) {
        const file = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(file);
        a.download = filename;
        a.click();
    }

    function updatePreview() {
        const responsibilities = Array.from(document.querySelectorAll('#responsibilitiesContainer input')).map(input => input.value.trim()).filter(v => v);

        const data = {
            driveName: document.getElementById('driveName').value,
            lead_characteristics: {
                industry: $('#industry').val(),
                department: $('#department').val(),
                headCount: $('#headCount').val(),
                revenue: $('#revenue').val(),
                location: $('#location').val(),
                whyLocation: document.getElementById('whyLocation').value
            },
            key_decision_makers: {
                titles: $('#titles').val(),
                responsibilities: responsibilities
            },
            stages: $('#stages').val(),
            substages: $('#subStages').val()
        };

        previewContent.textContent = JSON.stringify(data, null, 2);
        return data;
    }

    document.getElementById('saveForm').addEventListener('click', () => {
        const formData = updatePreview();
        downloadJSON(formData, 'icp_form_data.json');
        alert('Form data saved and downloaded as JSON!');
    });

    $('#industry, #department, #headCount, #titles, #revenue, #location, #stages, #subStages, #driveName, #whyLocation').on('change keyup', updatePreview);

    updatePreview();
</script>
</body>
</html>
